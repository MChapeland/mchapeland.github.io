<!DOCTYPE html>
<html>
<head>

    <!-- Title of the page -->
    <title>Project World Map</title>

    <!-- Page Setup -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=2.0" />
    <meta http-equiv="X-UA-Compatible" content="ie-edge" />

    <!-- Index Scripts -->
    <link rel="stylesheet" href="src/leaflet.css" />
	<script src="src/leaflet.js"></script>
    
    <link rel="stylesheet" href="src/leaflet-panel-layers.css" />
    <script src="src/leaflet-panel-layers.js"></script>

    <link rel="stylesheet" href="icons.css" />
    <link rel="stylesheet" href="style.css" />

</head>


<body>

    <!-- Map -->
    <div id="map"></div>

    <script>

        //Map Setup
        var map = L.map('map', { 'attributionControl': false }).setView([-15, 15], 2);

        var tiles = L.tileLayer('map/{z}/{x}/{y}.png', {
            continuousWorld: false,
            noWrap: true,
            minZoom: 2,
            maxZoom: 4,
        }).addTo(map);
        
        function iconByName(name) {
				return '<i class="icon icon-'+name+'"></i>';
			}

			function featureToMarker(feature, latlng) {
				return L.marker(latlng, {
					icon: L.divIcon({
						className: 'marker-'+feature.properties.amenity,
						html: iconByName(feature.properties.amenity),
						iconUrl: '../images/markers/'+feature.properties.amenity+'.png',
						iconSize: [25, 41],
						iconAnchor: [12, 41],
						popupAnchor: [1, -34],
						shadowSize: [41, 41]
					})
				});
			}

			var overLayers = [
				{
					name: "Bar",
					icon: iconByName('bar'),
					layer: L.geoJson(Bar, {pointToLayer: featureToMarker })
				},
				{
					name: "Drinking Water",
					icon: iconByName('drinking_water'),
					layer: L.geoJson(Drinking_water, {pointToLayer: featureToMarker })
				},
				{
					name: "Fuel",
					icon: iconByName('fuel'),
					layer: L.geoJson(Fuel, {pointToLayer: featureToMarker })
				},
				{
					name: "Parking",
					icon: iconByName('parking'),
					layer: L.geoJson(Parking, {pointToLayer: featureToMarker })
				}
			];

			var baseLayers = [
				{
					group: "Road Layers",
					icon: iconByName('parking'),
					collapsed: true,
					layers: [
						{
							name: "Open Cycle Map",
							icon: iconByName('drinking_water'),
							layer: L.tileLayer('https://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png')
						},
						{
							name: "Transports",
							icon: iconByName('drinking_water'),
							layer: L.tileLayer('https://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png')
						}
					]
				}
			];

			var panelLayers = new L.Control.PanelLayers(baseLayers, overLayers, {
				collapsibleGroups: true,
				collapsed: true
			});

			map.addControl(panelLayers);

		</script>


</html>
